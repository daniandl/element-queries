!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ElementQueries=t():e.ElementQueries=t()}(window,(function(){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(o,i,function(t){return e[t]}.bind(null,i));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){"use strict";r.r(t);const o=/([_A-z]+[A-z0-9-_]+):(\d+)/g,i="Element Queries is not supported by this browser.",n='The "observeDom" option is not supported by this browser.',s="Please provide an HTML or SVG element.",a="Please provide an array of valid elements (HTML/SVG).",l="No breakpoints found on element.",h="Invalid breakpoint overrides provided.",c="This instance is already initialized, please .destroy() it first.",d='You are using custom breakpoint overrides with the "obserDom" option enabled. This can have negative side-effects.',u={htmlAttrBreakpoints:"data-eq-breakpoints",htmlAttrActive:"data-eq-active",htmlAttrHeightBreakpoints:"data-eq-height-breakpoints",htmlAttrHeightActive:"data-eq-height-active",observeDom:!0},f=e=>e instanceof HTMLElement||e instanceof SVGElement&&!(e instanceof SVGSVGElement),b=e=>"[Element Queries] "+e,p={width:"htmlAttrActive",height:"htmlAttrHeightActive"};class m{constructor(e){"ResizeObserver"in window?(this.initialized=!1,this.opts=Object.freeze({...u,...e}),this.observer=new ResizeObserver(this.onResize.bind(this)),this.elements=new WeakMap,/complete|interactive|loaded/.test(document.readyState)?this.init():document.addEventListener("DOMContentLoaded",this.init.bind(this),{once:!0})):console.error(b(i))}init(){if(this.initialized)throw new Error(c);this.initialized=!0,this.opts.observeDom&&("MutationObserver"in window?(this.domObserver=new MutationObserver(this.onDomMutation.bind(this)),this.domObserver.observe(document.body,{childList:!0,subtree:!0})):console.error(b(n))),this.query()}onResize(e){const t=new Set;for(var r=e.length-1;r>=0;r--){const{target:o,borderBoxSize:i}=e[r];if(this.elements.has(o)){let e,r;if(i&&i[0])e=i[0].inlineSize,r=i[0].blockSize;else{const t=o instanceof SVGElement?o.getBBox():o.getBoundingClientRect();e=t.width,r=t.height}const n=this.elements.get(o);this.elements.set(o,{...n,width:e,height:r}),t.add(o)}}this.update([...t])}onDomMutation(e){const{htmlAttrBreakpoints:t,htmlAttrHeightBreakpoints:r}=this.opts;for(var o=e.length-1;o>=0;o--)if(e[o].addedNodes.length)for(var i=e[o].addedNodes.length-1;i>=0;i--){const n=e[o].addedNodes[i],s=n.getAttributeNames().some(e=>[t,r].includes(e));if(f(n)&&s)try{this.watch(n)}catch(e){console.error(b(e),n)}}}query(){const{htmlAttrBreakpoints:e,htmlAttrHeightBreakpoints:t}=this.opts,r=[e,t],o=document.querySelectorAll(r.map(e=>`[${e}]`).join(","));for(const e of o)try{this.watch(e)}catch(t){console.error(b(t),e)}}watch(e,t=null){if(!e||!f(e))throw new Error(s);if(t&&(this.opts.observeDom&&console.warn(b(d)),"object"!=typeof t||!t.width&&!t.height))throw new Error(h);const r=t||this.getBreakpointsFromAttrs(e);if(!Object.values(r).filter(Boolean).length)throw new Error(l);this.elements.set(e,{breakpoints:r}),this.observer.observe(e,{box:"border-box"})}unwatch(e){if(!e||!f(e))throw new Error(s);return this.elements.delete(e),this.observer.unobserve(e),this.elements.has(e)}update(e){if(!(e&&Array.isArray(e)&&e.length&&e.every(e=>f(e))))throw new Error(a);for(var t=e.length-1;t>=0;t--){const r=e[t],o=this.elements.get(r);if(!o||!m.hasBreakpoints(o))return;const i=Object.entries(o.breakpoints).reduce((e,[t,r])=>(e[t]=m.getActiveBreakpoint(o[t],r),e),{});for(const[e,t]of Object.entries(i))t?r.setAttribute(this.opts[p[e]],t):r.removeAttribute(this.opts[p[e]])}}destroy(){this.observer&&this.observer.disconnect(),this.domObserver&&this.domObserver.disconnect(),this.initialized=!1,this.elements=new WeakMap}getBreakpointsFromAttrs(e){const{htmlAttrBreakpoints:t,htmlAttrHeightBreakpoints:r}=this.opts,i={width:e.getAttribute(t),height:e.getAttribute(r)};if(!Object.values(i).filter(Boolean).length)throw new Error(l);return Object.entries(i).reduce((e,[t,r])=>{if(!r)return e;const i=[...(n=r,n.replace(/ /g,"")).matchAll(o)];var n;return i?(e[t]=i.reduce((e,t)=>t[1]&&t[2]?(e[t[1]]=+t[2],e):e,{}),e):e},{})}static hasBreakpoints(e){return Object.values(e.breakpoints).filter(Boolean).length>0}static getActiveBreakpoint(e,t){const r={...t,...(o=t,Object.entries(o).reduce((e,[t,r])=>Object.assign(e,{[r]:t}),{}))};var o;const i=Object.values(t).sort(),n=i[i.length-1];if(e>=n)return r[n];let s=null;if(e>i[0])for(let t=0;t<i.length;t++){const o=i[t];e>=o&&(s=r[o])}return s}}t.default=m}]).default}));